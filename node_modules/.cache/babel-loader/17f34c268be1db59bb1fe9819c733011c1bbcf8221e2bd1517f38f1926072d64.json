{"ast":null,"code":"// src/components/Login.tsx\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import useStore from'../store/store';import{authApi,ApiError}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[email,setEmail]=useState('librarian@library.com');const[password,setPassword]=useState('password123');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const setUser=useStore(state=>state.setUser);const user=useStore(state=>state.user);const navigate=useNavigate();useEffect(()=>{if(user){navigate('/dashboard');}},[user,navigate]);const handleLogin=async e=>{e.preventDefault();setIsLoading(true);setError('');if(!email||!password){setError('Please fill in all fields');setIsLoading(false);return;}try{const data=await authApi.login(email,password);const user={id:data.user.id.toString(),name:data.user.name,email:data.user.email,token:data.access_token,role:data.user.role};setUser(user);navigate('/dashboard');}catch(error){console.error('Error during login:',error);if(error instanceof ApiError){setError(error.message);}else{setError('Login failed. Please check your credentials.');}}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'400px',margin:'50px auto',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Library Management System\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',backgroundColor:'#ffebee',padding:'10px',borderRadius:'4px',marginBottom:'20px'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",style:{display:'block',marginBottom:'5px'},children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),disabled:isLoading,required:true,style:{width:'100%',padding:'8px',border:'1px solid #ccc',borderRadius:'4px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",style:{display:'block',marginBottom:'5px'},children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),disabled:isLoading,required:true,style:{width:'100%',padding:'8px',border:'1px solid #ccc',borderRadius:'4px'}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,style:{width:'100%',padding:'10px',backgroundColor:isLoading?'#ccc':'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:isLoading?'not-allowed':'pointer'},children:isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',fontSize:'14px',color:'#666'},children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Demo Credentials:\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Librarian: librarian@library.com / password123\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Member: alice@example.com / password123\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useStore","authApi","ApiError","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","isLoading","setIsLoading","error","setError","setUser","state","user","navigate","handleLogin","e","preventDefault","data","login","id","toString","name","token","access_token","role","console","message","style","maxWidth","margin","padding","children","color","backgroundColor","borderRadius","marginBottom","onSubmit","htmlFor","display","type","value","onChange","target","disabled","required","width","border","cursor","marginTop","fontSize"],"sources":["/Users/ederbarrios/Projects/Tests/Claude/library-react/src/components/Login.tsx"],"sourcesContent":["// src/components/Login.tsx\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport useStore from '../store/store';\nimport { authApi, ApiError } from '../services/api';\n\nconst Login: React.FC = () => {\n  const [email, setEmail] = useState('librarian@library.com');\n  const [password, setPassword] = useState('password123');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const setUser = useStore((state) => state.setUser);\n  const user = useStore((state) => state.user);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user) {\n      navigate('/dashboard');\n    }\n  }, [user, navigate]);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    if (!email || !password) {\n      setError('Please fill in all fields');\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const data = await authApi.login(email, password);\n\n      const user = {\n        id: data.user.id.toString(),\n        name: data.user.name,\n        email: data.user.email,\n        token: data.access_token,\n        role: data.user.role as 'librarian' | 'member',\n      };\n\n      setUser(user);\n      navigate('/dashboard');\n    } catch (error) {\n      console.error('Error during login:', error);\n      if (error instanceof ApiError) {\n        setError(error.message);\n      } else {\n        setError('Login failed. Please check your credentials.');\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: '400px', margin: '50px auto', padding: '20px' }}>\n      <h1>Library Management System</h1>\n      <h2>Login</h2>\n      \n      {error && (\n        <div style={{ \n          color: 'red', \n          backgroundColor: '#ffebee', \n          padding: '10px', \n          borderRadius: '4px', \n          marginBottom: '20px' \n        }}>\n          {error}\n        </div>\n      )}\n      \n      <form onSubmit={handleLogin}>\n        <div style={{ marginBottom: '15px' }}>\n          <label htmlFor=\"email\" style={{ display: 'block', marginBottom: '5px' }}>\n            Email:\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            disabled={isLoading}\n            required\n            style={{ \n              width: '100%', \n              padding: '8px', \n              border: '1px solid #ccc', \n              borderRadius: '4px' \n            }}\n          />\n        </div>\n        \n        <div style={{ marginBottom: '20px' }}>\n          <label htmlFor=\"password\" style={{ display: 'block', marginBottom: '5px' }}>\n            Password:\n          </label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            disabled={isLoading}\n            required\n            style={{ \n              width: '100%', \n              padding: '8px', \n              border: '1px solid #ccc', \n              borderRadius: '4px' \n            }}\n          />\n        </div>\n        \n        <button \n          type=\"submit\" \n          disabled={isLoading}\n          style={{ \n            width: '100%', \n            padding: '10px', \n            backgroundColor: isLoading ? '#ccc' : '#007bff', \n            color: 'white', \n            border: 'none', \n            borderRadius: '4px', \n            cursor: isLoading ? 'not-allowed' : 'pointer' \n          }}\n        >\n          {isLoading ? 'Logging in...' : 'Login'}\n        </button>\n      </form>\n      \n      <div style={{ marginTop: '20px', fontSize: '14px', color: '#666' }}>\n        <p><strong>Demo Credentials:</strong></p>\n        <p>Librarian: librarian@library.com / password123</p>\n        <p>Member: alice@example.com / password123</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}