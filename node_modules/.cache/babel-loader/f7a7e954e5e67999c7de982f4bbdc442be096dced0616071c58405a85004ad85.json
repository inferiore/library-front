{"ast":null,"code":"// FILE: store.ts\nimport{create}from'zustand';const getUserFromLocalStorage=()=>{const userData=localStorage.getItem('user');return userData?JSON.parse(userData):null;};const useStore=create(set=>({books:[],borrowings:[],user:getUserFromLocalStorage(),isLoading:false,setBooks:books=>set(()=>({books})),addBook:book=>set(state=>({books:[...state.books,book]})),updateBook:(bookId,updatedBook)=>set(state=>({books:state.books.map(book=>book.id===bookId?{...book,...updatedBook}:book)})),removeBook:bookId=>set(state=>({books:state.books.filter(book=>book.id!==bookId)})),setBorrowings:borrowings=>set(()=>({borrowings})),addBorrowing:borrowing=>set(state=>({borrowings:[...state.borrowings,borrowing]})),updateBorrowing:(borrowingId,updatedBorrowing)=>set(state=>({borrowings:state.borrowings.map(borrowing=>borrowing.id===borrowingId?{...borrowing,...updatedBorrowing}:borrowing)})),setUser:user=>set(()=>{localStorage.setItem('user',JSON.stringify(user));return{user};}),clearUser:()=>set(()=>{localStorage.removeItem('user');return{user:null};}),setLoading:loading=>set(()=>({isLoading:loading}))}));export default useStore;","map":{"version":3,"names":["create","getUserFromLocalStorage","userData","localStorage","getItem","JSON","parse","useStore","set","books","borrowings","user","isLoading","setBooks","addBook","book","state","updateBook","bookId","updatedBook","map","id","removeBook","filter","setBorrowings","addBorrowing","borrowing","updateBorrowing","borrowingId","updatedBorrowing","setUser","setItem","stringify","clearUser","removeItem","setLoading","loading"],"sources":["/Users/ederbarrios/Projects/Tests/Claude/library-react/src/store/store.ts"],"sourcesContent":["// FILE: store.ts\nimport { create } from 'zustand';\n\ninterface Book {\n  id: number;\n  title: string;\n  author: string;\n  genre: string;\n  isbn: string;\n  total_copies: number;\n  available_copies: number;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface Borrowing {\n  id: number;\n  book_id: number;\n  user_id: number;\n  borrowed_at: string;\n  due_at: string;\n  returned_at?: string;\n  book: Book;\n  user: {\n    id: number;\n    name: string;\n    email: string;\n  };\n}\n\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  token: string;\n  role: 'librarian' | 'member';\n}\n\ninterface AppState {\n  books: Book[];\n  borrowings: Borrowing[];\n  user: User | null;\n  isLoading: boolean;\n  setBooks: (books: Book[]) => void;\n  addBook: (book: Book) => void;\n  updateBook: (bookId: number, book: Partial<Book>) => void;\n  removeBook: (bookId: number) => void;\n  setBorrowings: (borrowings: Borrowing[]) => void;\n  addBorrowing: (borrowing: Borrowing) => void;\n  updateBorrowing: (borrowingId: number, borrowing: Partial<Borrowing>) => void;\n  setUser: (user: User) => void;\n  clearUser: () => void;\n  setLoading: (loading: boolean) => void;\n}\n\nconst getUserFromLocalStorage = (): User | null => {\n  const userData = localStorage.getItem('user');\n  return userData ? JSON.parse(userData) : null;\n};\n\nconst useStore = create<AppState>((set) => ({\n  books: [],\n  borrowings: [],\n  user: getUserFromLocalStorage(),\n  isLoading: false,\n  setBooks: (books) =>\n    set(() => ({\n      books,\n    })),\n  addBook: (book) =>\n    set((state) => ({\n      books: [...state.books, book],\n    })),\n  updateBook: (bookId, updatedBook) =>\n    set((state) => ({\n      books: state.books.map((book) =>\n        book.id === bookId ? { ...book, ...updatedBook } : book\n      ),\n    })),\n  removeBook: (bookId) =>\n    set((state) => ({\n      books: state.books.filter((book) => book.id !== bookId),\n    })),\n  setBorrowings: (borrowings) =>\n    set(() => ({\n      borrowings,\n    })),\n  addBorrowing: (borrowing) =>\n    set((state) => ({\n      borrowings: [...state.borrowings, borrowing],\n    })),\n  updateBorrowing: (borrowingId, updatedBorrowing) =>\n    set((state) => ({\n      borrowings: state.borrowings.map((borrowing) =>\n        borrowing.id === borrowingId ? { ...borrowing, ...updatedBorrowing } : borrowing\n      ),\n    })),\n  setUser: (user) =>\n    set(() => {\n      localStorage.setItem('user', JSON.stringify(user));\n      return { user };\n    }),\n  clearUser: () =>\n    set(() => {\n      localStorage.removeItem('user');\n      return { user: null };\n    }),\n  setLoading: (loading) =>\n    set(() => ({\n      isLoading: loading,\n    })),\n}));\n\nexport default useStore;"],"mappings":"AAAA;AACA,OAASA,MAAM,KAAQ,SAAS,CAsDhC,KAAM,CAAAC,uBAAuB,CAAGA,CAAA,GAAmB,CACjD,KAAM,CAAAC,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC7C,MAAO,CAAAF,QAAQ,CAAGG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC,CAAG,IAAI,CAC/C,CAAC,CAED,KAAM,CAAAK,QAAQ,CAAGP,MAAM,CAAYQ,GAAG,GAAM,CAC1CC,KAAK,CAAE,EAAE,CACTC,UAAU,CAAE,EAAE,CACdC,IAAI,CAAEV,uBAAuB,CAAC,CAAC,CAC/BW,SAAS,CAAE,KAAK,CAChBC,QAAQ,CAAGJ,KAAK,EACdD,GAAG,CAAC,KAAO,CACTC,KACF,CAAC,CAAC,CAAC,CACLK,OAAO,CAAGC,IAAI,EACZP,GAAG,CAAEQ,KAAK,GAAM,CACdP,KAAK,CAAE,CAAC,GAAGO,KAAK,CAACP,KAAK,CAAEM,IAAI,CAC9B,CAAC,CAAC,CAAC,CACLE,UAAU,CAAEA,CAACC,MAAM,CAAEC,WAAW,GAC9BX,GAAG,CAAEQ,KAAK,GAAM,CACdP,KAAK,CAAEO,KAAK,CAACP,KAAK,CAACW,GAAG,CAAEL,IAAI,EAC1BA,IAAI,CAACM,EAAE,GAAKH,MAAM,CAAG,CAAE,GAAGH,IAAI,CAAE,GAAGI,WAAY,CAAC,CAAGJ,IACrD,CACF,CAAC,CAAC,CAAC,CACLO,UAAU,CAAGJ,MAAM,EACjBV,GAAG,CAAEQ,KAAK,GAAM,CACdP,KAAK,CAAEO,KAAK,CAACP,KAAK,CAACc,MAAM,CAAER,IAAI,EAAKA,IAAI,CAACM,EAAE,GAAKH,MAAM,CACxD,CAAC,CAAC,CAAC,CACLM,aAAa,CAAGd,UAAU,EACxBF,GAAG,CAAC,KAAO,CACTE,UACF,CAAC,CAAC,CAAC,CACLe,YAAY,CAAGC,SAAS,EACtBlB,GAAG,CAAEQ,KAAK,GAAM,CACdN,UAAU,CAAE,CAAC,GAAGM,KAAK,CAACN,UAAU,CAAEgB,SAAS,CAC7C,CAAC,CAAC,CAAC,CACLC,eAAe,CAAEA,CAACC,WAAW,CAAEC,gBAAgB,GAC7CrB,GAAG,CAAEQ,KAAK,GAAM,CACdN,UAAU,CAAEM,KAAK,CAACN,UAAU,CAACU,GAAG,CAAEM,SAAS,EACzCA,SAAS,CAACL,EAAE,GAAKO,WAAW,CAAG,CAAE,GAAGF,SAAS,CAAE,GAAGG,gBAAiB,CAAC,CAAGH,SACzE,CACF,CAAC,CAAC,CAAC,CACLI,OAAO,CAAGnB,IAAI,EACZH,GAAG,CAAC,IAAM,CACRL,YAAY,CAAC4B,OAAO,CAAC,MAAM,CAAE1B,IAAI,CAAC2B,SAAS,CAACrB,IAAI,CAAC,CAAC,CAClD,MAAO,CAAEA,IAAK,CAAC,CACjB,CAAC,CAAC,CACJsB,SAAS,CAAEA,CAAA,GACTzB,GAAG,CAAC,IAAM,CACRL,YAAY,CAAC+B,UAAU,CAAC,MAAM,CAAC,CAC/B,MAAO,CAAEvB,IAAI,CAAE,IAAK,CAAC,CACvB,CAAC,CAAC,CACJwB,UAAU,CAAGC,OAAO,EAClB5B,GAAG,CAAC,KAAO,CACTI,SAAS,CAAEwB,OACb,CAAC,CAAC,CACN,CAAC,CAAC,CAAC,CAEH,cAAe,CAAA7B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}